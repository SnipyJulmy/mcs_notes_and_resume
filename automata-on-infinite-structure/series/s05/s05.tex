\documentclass[a4paper,11pt]{report}

\usepackage{amsmath,amssymb}
\usepackage{fullpage}
\usepackage{graphicx}

\usepackage{bussproofs}
\usepackage{mathpartir}
\usepackage{prooftrees}
\usepackage{color}

\usepackage{tikz}
\usetikzlibrary{automata,positioning}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

\makeatletter
\pgfmathdeclarefunction{alpha}{1}{%
  \pgfmathint@{#1}%
  \edef\pgfmathresult{\pgffor@alpha{\pgfmathresult}}%
}

\newcommand*{\until}{U}
\newcommand*{\disj}{\ ,\ }
\newcommand*{\A}{\square}  % Always
\newcommand*{\D}{\diamondsuit} % eventually

\newcommand*{\Pq}{(\top,\bot)}
\newcommand*{\pQ}{(\bot,\top)}
\newcommand*{\PQ}{(\top,\top)}
\newcommand*{\pq}{(\bot,\bot)}


% tikz
\usepackage{tikz}
\usetikzlibrary{snakes}



\author{Sylvain Julmy}
\date{\today}

\setlength{\parindent}{0pt}
\setlength{\parskip}{2.5pt}

\begin{document}

\begin{center}
\Large{
    Automata on Infinite Structure\\
    Fall 2018
  }
  
  \noindent\makebox[\linewidth]{\rule{\linewidth}{0.4pt}}
  Exercice Sheet 5

  \vspace*{1.4cm}

  Author : Sylvain Julmy
  \noindent\makebox[\linewidth]{\rule{\linewidth}{0.4pt}}

  \begin{flushleft}
    Professor : Ultes-Nitsche Ulrich
    
    Assistant : Stammet Christophe
  \end{flushleft}

  \noindent\makebox[\linewidth]{\rule{\textwidth}{1pt}}
\end{center}

\section*{Exercice 1}

We assume that the right most state is labeled $3$ and not $2$.

\subsection*{\texttt{abaaa}}

\begin{center}
  \begin{forest}
    [$0$ 
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}]
    [$1$ , edge label={node[midway, right]{$a$}}]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}]
    [$1$ , edge label={node[midway, right]{$a$}}]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]
    [$3$ , edge label={node[midway, right]{$b$}}
    [$?$ , edge label={node[midway, right]{$a$}}]    ]    ]    ]
  \end{forest}
\end{center}

The accepting runs are :
\[
  \{
  000012,
  000122,
  010122,
  010012
  \}
\]

The greedy runs are :
\[
  \{ 000122 , 010122 \}
\]

\subsection*{\texttt{abbaa}}

\begin{center}
  \begin{forest}
    [$0$
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}]
    [$1$ , edge label={node[midway, right]{$a$}}]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, right]{$a$}}]    ]    ]    ]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$b$}}
    [$0$ , edge label={node[midway, left]{$a$}}
    [$0$ , edge label={node[midway, left]{$a$}}]
    [$1$ , edge label={node[midway, right]{$a$}}]    ]
    [$1$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, right]{$a$}}]    ]    ]    ]
    [$3$ , edge label={node[midway, right]{$b$}}
    [$1$ , edge label={node[midway, right]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, right]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, right]{$a$}}]    ]    ]    ]    ]    ]
  \end{forest}
\end{center}

The accepting runs are :
\[
  \{
  000012,
  010012,
  013122
  \}
\]

The greedy runs are :
\[
  \{ 013122 \}
\]

\subsection*{\texttt{abbbaaa}}

\begin{center}
  \begin{forest}
    [$0$
    [$1$ , edge label={node[midway, left]{$a$}}
    [$1$ , edge label={node[midway, left]{$b$}}
    [$1$ , edge label={node[midway, left]{$b$}}
    [$1$ , edge label={node[midway, left]{$b$}} [$?$ , edge label={node[midway, left]{$a$}}]    ]
    [$\textcircled{2}$ , edge label={node[midway, right]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]    ]
    [$\textcircled{2}$ , edge label={node[midway, right]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]    ]    ]
    [$\textcircled{2}$ , edge label={node[midway, right]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]    ]    ]    ]
    [$3$ , edge label={node[midway, right]{$a$}}
    [$4$ , edge label={node[midway, left]{$b$}}
    [$5$ , edge label={node[midway, left]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$b$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}
    [$\textcircled{2}$ , edge label={node[midway, left]{$a$}}]    ]    ]    ]    ]    ]    ]    ]    ]
  \end{forest}
\end{center}

The accepting runs are :
\[
  \{
  01112222,
  01122222,
  01222222,
  03452222
  \}
\]

The greedy runs are :
\[
  \{
  01222222
  \}
\]

\section*{Exercice 2}

\begin{center}
  \begin{forest}
    for tree={
      anchor=center,
    },
    [$0$
    [$0$ , edge label={node[midway, left]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]    ]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]
    ]
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]
    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]
    ]
    ]
    ]
    [$1$ , edge label={node[midway, left]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]
    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]    ]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]
    ]
    [$4$ , edge label={node[midway, right]{$b$}}]
    ]
    ]
    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]    ]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]    ]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]
    ]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]
    ]
    [$4$ , edge label={node[midway, right]{$b$}}]
    ]
    ]
    ]
    [$3$ , edge label={node[midway, right]{$a$}}
    [$4$ , edge label={node[midway, left]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]
    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}
    [$3$ , edge label={node[midway, left]{$a$}}
    [$4$ , edge label={node[midway, right]{$b$}}
    [$5$ , edge label={node[midway, left]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]    ]    ]
    [$\textcircled{6}$ , edge label={node[midway, right]{$a$}}
    [$2$ , edge label={node[midway, left]{$b$}}]
    [$4$ , edge label={node[midway, right]{$b$}}]    ]
    ]
    [$4$ , edge label={node[midway, right]{$b$}}]
    ]
    ]
    ]
    [$5$ , edge label={node[midway, right]{$a$}}
    [$?$ , edge label={node[midway, left]{$b$}}]
    ]
    ]
  \end{forest}
\end{center}

The structures of the accepting runs is :

\[
  (00|12|34)  (2(346|6))^\omega
\]

Note : it's a regular expression to represent the accepting run of the
automaton.

The greedy runs are :
\[
  \{
  0046\dots,
  0026\dots,
  0126\dots,
  0346\dots
  \}
\]

\begin{align*}
\end{align*}

\newpage

\section*{Exercice 3}

\[ A_1 = \]

\begin{center}
  \begin{tikzpicture}[shorten >=1pt,node distance=3cm,on grid,auto]
    \node[state,initial] (q0) {$\{0\}$};
    \node[state] (q01) [below = of q0] {$\{0,1\}$};
    \node[state,accepting] (q02) [below right = of q01] {$\{0,2\}$};
    \node[state] (q03) [below left = of q01] {$\{0,3\}$};
    \path[->]
    (q0)
    edge [loop above] node [] {$b$} ()
    edge [] node [] {$a$} (q01)
    (q01)
    edge [bend left] node [] {$a$} (q02)
    edge [bend left] node [] {$b$} (q03)
    (q02)
    edge [bend left] node [] {$a,b$} (q01)
    (q03)
    edge [bend left] node [] {$a,b$} (q01)
    ;
  \end{tikzpicture}
\end{center}

\[ A_2 = \]

\begin{center}
  \begin{tikzpicture}[shorten >=1pt,node distance=3cm,on grid,auto]
    \node[state,initial] (q0) {$\{0\}$};
    \node[state] (q13) [below = of q0] {$\{1,3\}$};
    \node[state,accepting] (q124) [below = of q13] {$\{1,2,4\}$};
    \node[state,accepting] (q2) [below left = of q124] {$\{2\}$};
    \node[state,accepting] (q125) [below right = of q124] {$\{1,2,5\}$};
    \node[state,accepting] (q12) [below = of q125] {$\{1,2\}$};
    \path[->]
    (q0)
    edge [] node [] {$a$} (q13)
    (q13)
    edge [] node [] {$b$} (q124)
    (q124)
    edge [] node [] {$a$} (q2)
    edge [] node [] {$b$} (q125)
    (q2)
    edge [loop below] node [] {$a,b$} ()
    (q125)
    edge [] node [] {$a$} (q2)
    edge [] node [] {$b$} (q12)
    (q12)
    edge [] node [] {$a$} (q2)
    edge [loop right] node [] {$b$} ()
    ;
  \end{tikzpicture}
\end{center}

\[ A_3 = \]

\begin{center}
  \begin{tikzpicture}[shorten >=1pt,node distance=3cm,on grid,auto]
    \node[state,initial] (q0) {$\{0\}$};
    \node[state] (q0135) [below left = of q0] {$\{0,1,3,5\}$};
    \node[state] (q24) [below right = of q0] {$\{2,4\}$};
    \node[state,accepting] (q356) [below = of q24] {$\{3,5,6\}$};
    \node[state] (trap) [right = of q24] {trap};
    \path[->]
    (q0)
    edge [] node [] {$a$} (q0135)
    edge [] node [] {$b$} (q24)
    (q0135)
    edge [loop left] node [] {$a$} ()
    edge [] node [] {$b$} (q24)
    (q24)
    edge [bend left] node [] {$a$} (q356)
    edge [] node [] {$b$} (trap)
    (q356)
    edge [] node [] {$a$} (trap)
    edge [bend left] node [] {$b$} (q24)
    ;
  \end{tikzpicture}
\end{center}

\end{document}